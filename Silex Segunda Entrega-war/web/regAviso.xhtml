<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition template="/WEB-INF/templates/plantilla_formulario.xhtml"  
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="title">Crear aviso</ui:define>


    <ui:define name="titulo">
        <h1 class="col-md-10">Nuevo Aviso <small class="text-right"><h:outputText value="#{controlAviso.nuevoIdentAviso()}" /></small></h1>
        <br/>
    </ui:define>


    <ui:define name="panel-lateral">
        <div class="row" style="margin-top: 50px;">
            <h:form style="text-align: center;">
                <h:commandLink class="btn-default col-xs-4 col-md-5" style="padding: 5px 20px 5px 20px;">
                    <span class="glyphicon glyphicon-file"> PDF</span>
                </h:commandLink>

                <h:commandLink class="btn-default col-xs-4 col-md-5" style="margin-left: 30px; padding: 5px 20px 5px 20px;">
                    <span class="glyphicon glyphicon-print"> Imprimir</span>
                </h:commandLink>
            </h:form>
            <br/><br/>
            <h3>Consejos</h3>
            <h:form class="col-md-12">
                <p:tabView orientation="top">
                    <p:tab title="Dirección">
                        <h:panelGrid columns="1" cellpadding="5">
                            <p> En la dirección debe aparecer al menos la calle y
                                el número del inmueble más cercano posible a la incidencia.
                            </p><br/>
                            <p> El código postal reduce la lista de candidatos a 
                                resolver el trabajo, siendo un campo indispensable.
                            </p><br/>
                            <p> De tratarse de una inicidencia sin dirección, ya sea en
                                carreteras o recintos rurales, se requerirán coordenadas GPS"
                            </p>
                        </h:panelGrid>
                    </p:tab>
                    <p:tab title="Asignación">
                        <h:panelGrid columns="1" cellpadding="5">
                            <p> Los operarios que aparecen en la lista coinciden en CP con la dirección dada
                                y se encuentran en estado disponible.
                            </p>
                        </h:panelGrid>
                    </p:tab>
                    <p:tab title="Cliente">
                        <h:panelGrid columns="1" cellpadding="5">
                            <p> El identificador de avisos se le puede ofrecer
                                al cliente para adjuntar una imagen al aviso.
                            </p><br/>
                            <p> Es tarea del cliente interesado mandar un correo
                                electrónico con imagenes o videos adjuntos a 
                                <em style="color: #286090; text-decoration: none">avisos@emasa.es</em>
                                con el número del aviso en el asunto.</p>
                        </h:panelGrid>
                    </p:tab>
                </p:tabView>
            </h:form>
        </div>
    </ui:define>



    <ui:define name="titulo-pestaña1">
        <h3>Ubicación</h3>
    </ui:define>

    <ui:define name="titulo-pestaña2">
        <h3>Aviso</h3>
    </ui:define>

    <ui:define name="titulo-pestaña3">
        <h3>Cliente</h3>
    </ui:define>



    <ui:define name="campos-pestaña1">
        <p:inputText class="campo" alt="direccion" value="#{controlAviso.direccion}"/>
        <label for="direccion" class="pie">Calle, número</label>
        <table class="campo">
            <tr>
                <td>
                    <p:inputText class="campo" value="#{controlAviso.CP}"/>
                </td>
                <td>
                    <p:inputText style="width: 100%" value="#{controlAviso.municipio}"/>
                </td>
            </tr>
            <tr>
                <td>
                    <label class="pie">Codigo Postal</label>
                </td>
                <td>
                    <label class="pie">Municipio</label>
                </td>
            </tr>
        </table>
        <p:inputText class="campo" value="#{controlAviso.GPS}"/>
        <label class="pie">Coordenadas GPS</label>
    </ui:define>



    <ui:define name="campos-pestaña2">
        <div class="row">
            <div class="col-md-3">
                <p class="pie"><p:selectBooleanCheckbox value="#{controlAviso.urgente}"/>
                    <span class="glyphicon glyphicon-alert"/>
                    Urgente </p>
            </div>
            <div class="col-md-3">
                <p class="pie"><p:selectBooleanCheckbox value="#{controlAviso.planificado}"/>
                    <span class="glyphicon glyphicon-time"/>
                    Planificado </p>
            </div>
        </div>

        <p:inputTextarea counter="cnt_descripcion" maxlength="200" counterTemplate="{0}"
                         autoResize="true" class="campodescripcion" style="width: 100%;"
                         value="#{controlAviso.descripcion}"/>
        <h:outputText id="cnt_descripcion"/>
        <label class="pie">Descripción de la avería</label>

        <h:form>
            <p:fileUpload fileUploadListener="#{fileUploadView.handleFileUpload}" mode="advanced" dragDropSupport="true"
                          multiple="true" update="messages" fileLimit="1" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" 
                          style="width: 90%;"/>
            <p:growl id="messages" showDetail="true" />
        </h:form>    
        <br/>
    </ui:define>

<!-->
    <ui:define name="campos-pestaña3">
        <table class="campo">
            <tr>
                <td>
                    <p:inputText class="campo" value="#{controlAviso.nombreCliente}"/>
                </td>
                <td>
                    <p:inputText style="width: 100%" value="#{controlAviso.apellidosCliente}"/>
                </td>
            </tr>
            <tr>
                <td>
                    <label class="pie">Nombre</label>
                </td>
                <td>
                    <label class="pie">Apellidos</label>
                </td>
            </tr> <tr>
                <td>
                    <p:inputText class="campo" value="#{controlAviso.telefonoCliente}"/>
                </td>
                <td>
                    <p:inputText style="width: 100%" value="#{controlAviso.emailCliente}"/>
                </td>
            </tr>
            <tr>
                <td>
                    <label class="pie">Teléfono</label>
                </td>
                <td>
                    <label class="pie">Correo electrónico</label>
                </td>
            </tr>
        </table>
    </ui:define>
<!-->
    <ui:define name="btn_confirmar">
        <h:commandButton action="#{controlAviso.addAviso()}" value="Confirmar" class="btn-primary"/>
    </ui:define>

    <ui:define name="btn_cancelar">
        <h:commandButton action="#{controlAutorizacion.home()}" immediate="true" value="Cancelar" class="btn-danger"/>
    </ui:define>

</ui:composition>
