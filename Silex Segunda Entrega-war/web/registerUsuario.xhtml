<!DOCTYPE html>
<ui:composition template="/WEB-INF/templates/plantilla_formulario.xhtml" 
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="title">Registro Operario</ui:define>  
    <ui:define name="campos-pestaña1">
        <h:form>
            <div class="row">
                <div class="col-md-6">
                    <h:outputText value="Nombre de usuario: *" />
                </div>
                <div class="col-md-6">
                    <p:inputText value="#{control_registro.user.username}" required="true" label="Nombre de usuario: *" requiredMessage="Campo Obligatorio"/>
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Email: *" />
                </div>
                <div class="col-md-6">
                    <p:inputText value="#{control_registro.user.email}" required ="true" validatorMessage="Formato de email incorrecto">
                        <f:validateRegex pattern=".+@.+"/>
                        <!--
                        La expresión es
                        "([-!#-'*+/-9=?A-Z^-~]+(\.[-!#-'*+/-9=?A-Z^-~]+)*|\"([]!#-[^-~ \t]|(\\[\t -~]))+\")@[0-9A-Za-z]([0-9A-Za-z-]{0,61}[0-9A-Za-z])?(\.[0-9A-Za-z]([0-9A-Za-z-]{0,61}[0-9A-Za-z])?)+"
                        -->
                    </p:inputText>
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Contraseña: *" />
                </div>
                <div class="col-md-6">
                    <p:password id = "pwd1" value="#{control_registro.pwd1}" required="true" label="Contraseña" match="pwd2" validatorMessage="Contraseñas incorrectas"/>
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Repetir contraseña: *" />
                </div>
                <div class="col-md-6">
                    <p:password id = "pwd2" value="#{control_registro.pwd2}" required="true" label="Contraseña2"/>
                    <br/>
                </div>
            </div>
            <div class="col-md-6">
                    <h:outputText value="Tipo de usuario: " />
                </div>
                <div class="col-md-6">
                    <h:selectOneMenu class="form-control" value="#{controlRegistro.user.rol}">
                        <f:selectItem itemValue="0" itemLabel="Cliente" />
                        <f:selectItem itemValue="1" itemLabel="Call-Center" />
                        <f:selectItem itemValue="2" itemLabel="Supervisor" />
                        <f:selectItem itemValue="3" itemLabel="Operario" />
                        <f:selectItem itemValue="4" itemLabel="Administrador" />
                    </h:selectOneMenu>
                    <br/>
                </div>
        </h:form>
    </ui:define>
    <ui:define name="campos-pestaña2">
        <h:form>
            <div class="row">
                <div class="col-md-6">
                    <h:outputText value="DNI: " />
                </div>
                <div class="col-md-6">
                    <p:inputText value="#{control_registro.user.dni}" />
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Nombre: " />
                </div>
                <div class="col-md-6">
                    <p:inputText value="#{control_registro.user.nombre}"/>
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Apellidos: " />
                </div>
                <div class="col-md-6">
                    <p:inputText value="#{control_registro.user.apellidos}" />                                    
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Sexo: " />
                </div>
                <div class="col-md-6">
                    <select class="form-control" value ="#{control_registro.user.sexo}">
                        <option disabled ="disabled" selected ="selected" value = ""> Seleccione una opción </option>
                        <option>Mujer</option>
                        <option>Hombre</option>
                    </select>                                    
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Teléfono: " />
                </div>
                <div class="col-md-6">
                    <p:inputText value="#{control_registro.user.telefono}" />
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Dirección: " />
                </div>
                <div class="col-md-6">
                    <p:inputText value="#{control_registro.user.dirección}" />
                    <br/>
                </div>
            </div>
        </h:form>
    </ui:define>
    <ui:define name="campos-pestaña3">
        <h:form>
            <div class="row">
                <div class="col-md-6">
                    <h:outputText value="Tipo: " />
                </div>
                <div class="col-md-6">
                    <p:inputText value="#{control_registro.user.tipo}" />
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Especialización: " />
                </div>
                <div class="col-md-6">
                    <p:inputText value="#{control_registro.user.especializacion}"/>
                    <br/>
                </div>
                <div class="col-md-6">
                    <h:outputText value="Disponibilidad: " />
                </div>
                <div class="col-md-6">
                    <p:selectBooleanCheckbox value="#{control_registro.user.disponibilidad}" />
                    <br/>
                </div>
            </div>
        </h:form>
    </ui:define>

    <ui:define name="btn_confirmar">
        <c:choose>
            <c:when test="#{controlAutorizacion.usuario.rol == 'ADMINISTRADOR'}">
                <h:commandButton action="#{control_registro.registrarOperario()}" value="Confirmar" class="btn-primary"/>
            </c:when>
            <c:otherwise>
                <h:commandButton action="null" value="Necesita ser Administrador"  disabled="#{bean.disable}" class="btn-primary"/>    
            </c:otherwise>
        </c:choose>
    </ui:define>
    <ui:define name="btn_cancelar">
        <h:commandButton action="index.xhtml" immediate="true" value="Cancelar" class="btn-danger"/>
    </ui:define>

</ui:composition>
